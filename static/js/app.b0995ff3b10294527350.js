webpackJsonp([1],{"5Ts7":function(e,t){},AMBn:function(e,t){},DuPI:function(e,t){},KpPp:function(e,t,i){var n;n=function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}return i.m=e,i.c=t,i.p="",i(0)}([function(e,t){var i;function n(e){return"function"==typeof e.key?e.key():e.key}function a(e){return"[object Object]"===Object.prototype.toString.call(e)}function r(e){var t=e.val(),i=a(t)?t:{".value":t};return i[".key"]=n(e),i}function s(e,t){for(var i=0;i<e.length;i++)if(e[i][".key"]===t)return i;return-1}function o(e,t,i){var o=!1,c=null,h=null;if(a(i)&&i.hasOwnProperty("source")&&(o=i.asObject,c=i.cancelCallback,h=i.readyCallback,i=i.source),!a(i))throw new Error("VueFire: invalid Firebase binding source.");var d,u=("function"==typeof(d=i).ref?d=d.ref():"object"==typeof d.ref&&(d=d.ref),d);e.$firebaseRefs[t]=u,e._firebaseSources[t]=i,c&&(c=c.bind(e)),o?function(e,t,i,n){l(e,t,{});var a=i.on("value",function(i){e[t]=r(i)},n);e._firebaseListeners[t]={value:a}}(e,t,i,c):function(e,t,i,a){var o=[];l(e,t,o);var c=i.on("child_added",function(e,t){var i=t?s(o,t)+1:0;o.splice(i,0,r(e))},a),h=i.on("child_removed",function(e){var t=s(o,n(e));o.splice(t,1)},a),d=i.on("child_changed",function(e){var t=s(o,n(e));o.splice(t,1,r(e))},a),u=i.on("child_moved",function(e,t){var i=s(o,n(e)),a=o.splice(i,1)[0],r=t?s(o,t)+1:0;o.splice(r,0,a)},a);e._firebaseListeners[t]={child_added:c,child_removed:h,child_changed:d,child_moved:u}}(e,t,i,c),h&&i.once("value",h.bind(e))}function l(e,t,n){t in e?e[t]=n:i.util.defineReactive(e,t,n)}function c(e){e.$firebaseRefs||(e.$firebaseRefs=Object.create(null),e._firebaseSources=Object.create(null),e._firebaseListeners=Object.create(null))}var h={created:function(){var e=this.$options.firebase;if("function"==typeof e&&(e=e.call(this)),e)for(var t in c(this),e)o(this,t,e[t])},beforeDestroy:function(){if(this.$firebaseRefs){for(var e in this.$firebaseRefs)this.$firebaseRefs[e]&&this.$unbind(e);this.$firebaseRefs=null,this._firebaseSources=null,this._firebaseListeners=null}}};function d(e){(i=e).mixin(h);var t=i.config.optionMergeStrategies;t.firebase=t.provide,i.prototype.$bindAsObject=function(e,t,i,n){c(this),o(this,e,{source:t,asObject:!0,cancelCallback:i,readyCallback:n})},i.prototype.$bindAsArray=function(e,t,i,n){c(this),o(this,e,{source:t,cancelCallback:i,readyCallback:n})},i.prototype.$unbind=function(e){!function(e,t){var i=e._firebaseSources&&e._firebaseSources[t];if(!i)throw new Error('VueFire: unbind failed: "'+t+'" is not bound to a Firebase reference.');var n=e._firebaseListeners[t];for(var a in n)i.off(a,n[a]);e[t]=null,e.$firebaseRefs[t]=null,e._firebaseSources[t]=null,e._firebaseListeners[t]=null}(this,e)}}"undefined"!=typeof window&&window.Vue&&d(window.Vue),e.exports=d}])},e.exports=n()},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),a=i("kxiW"),r=i.n(a),s={name:"navbar",data:()=>({isLoggedIn:!1,currentUser:!1}),created(){r.a.auth().currentUser&&(this.isLoggedIn=!0,this.currentUser=r.a.auth().currentUser.email)},methods:{logout:function(){r.a.auth().signOut().then(()=>{this.$router.push("/login"),window.location.reload(!0)})}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-white"},[i("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[e._v("Playscapes")]),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarTogglerDemo02"}},[i("ul",{staticClass:"navbar-nav ml-auto mt-2 mt-lg-0"},[e.isLoggedIn?i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",attrs:{to:"/rtplay"}},[e._v("RT Playboard")])],1):e._e(),e._v(" "),e.isLoggedIn?i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",attrs:{to:"/rtthreed"}},[e._v("RT 3D")])],1):e._e(),e._v(" "),e.isLoggedIn?i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v(e._s(e.currentUser))])],1):e._e(),e._v(" "),e.isLoggedIn?e._e():i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[e._v("Login")])],1),e._v(" "),e.isLoggedIn?e._e():i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",attrs:{to:"/register"}},[e._v("Register")])],1),e._v(" "),e.isLoggedIn?i("li",{staticClass:"nav-item"},[i("button",{staticClass:"btn btn-outline-dark my-2 my-sm-0",on:{click:e.logout}},[e._v("Logout")])]):e._e()])])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo02","aria-controls":"navbarTogglerDemo02","aria-expanded":"false","aria-label":"Toggle navigation"}},[t("span",{staticClass:"navbar-toggler-icon"})])}]},l={name:"App",components:{Navbar:i("VU/8")(s,o,!1,null,null,null).exports}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Navbar"),this._v(" "),t("div",[t("router-view")],1)],1)},staticRenderFns:[]},h=i("VU/8")(l,c,!1,null,null,null).exports,d=i("/ocq");i("881v");const u=r.a.initializeApp({apiKey:"AIzaSyCeOmk2Dn8KK175ip0Pmgb7cu1kd7j_M8o",authDomain:"playscapes01.firebaseapp.com",databaseURL:"https://playscapes01.firebaseio.com",projectId:"playscapes01",storageBucket:"playscapes01.appspot.com",messagingSenderId:"370840827427"});let p=u.firestore(),m=u.database();var v={name:"dashboard",data:()=>({employees:[],isLoggedIn:!1,currentUser:!1}),created(){r.a.auth().currentUser&&(this.isLoggedIn=!0,this.currentUser=r.a.auth().currentUser.email),p.collection("employees").orderBy("employee_id").get().then(e=>{e.forEach(e=>{const t={id:e.id,employee_id:e.data().employee_id,name:e.data().name,dept:e.data().dept};this.employees.push(t)})}),console.log(this.employees)},methods:{logout:function(){r.a.auth().signOut().then(()=>{this.$router.push("/login"),window.location.reload(!0)})}}},f={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container pt-5",attrs:{id:"dashboard"}},[i("div",{staticClass:"card"},[i("ul",{staticClass:"list-group list-group-flush"},[i("li",{staticClass:"list-group-item"},[e._v("Signed in as: "+e._s(e.currentUser))]),e._v(" "),i("button",{staticClass:"list-group-item btn btn-outline-danger",on:{click:e.logout}},[e._v("Sign Out")])])]),e._v(" "),i("hr"),e._v(" "),i("div",{staticClass:"card"},[e._m(0),e._v(" "),i("table",{staticClass:"table table-striped"},[e._m(1),e._v(" "),i("tbody",e._l(e.employees,function(t){return i("tr",{key:t.id},[i("th",{attrs:{scope:"row"}},[e._v(e._s(t.employee_id))]),e._v(" "),i("td",[e._v(e._s(t.name))]),e._v(" "),i("td",[e._v(e._s(t.dept))]),e._v(" "),i("td",[i("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:{name:"view-employee",params:{employee_id:t.employee_id}}}},[e._v("view")])],1)])}),0)]),e._v(" "),i("ul",{staticClass:"list-group list-group-flush"},[i("router-link",{staticClass:"list-group-item btn btn-outline-success",attrs:{to:"/"}},[e._v("Add (to be implemented)")])],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h4",[this._v("Ongoing Games")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[this._v("ID")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Name")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Owner")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Overview")])])])}]},g=i("VU/8")(v,f,!1,null,null,null).exports,w={name:"new-employee",data:()=>({employee_id:null,name:null,dept:null}),methods:{saveEmployee(){p.collection("employees").add({employee_id:this.employee_id,name:this.name,dept:this.dept,position:this.position}).then(e=>{this.$router.push("/")}).catch(e=>console.log(err))}}},y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container pt-5",attrs:{id:"new-employee"}},[i("div",{staticClass:"card"},[e._m(0),e._v(" "),i("div",{staticClass:"card-body"},[i("form",{staticClass:"col s12",on:{submit:function(t){return t.preventDefault(),e.saveEmployee(t)}}},[i("div",{staticClass:"input-group mb-3"},[e._m(1),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.employee_id,expression:"employee_id"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.employee_id},on:{input:function(t){t.target.composing||(e.employee_id=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"input-group mb-3"},[e._m(2),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"input-group mb-3"},[e._m(3),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.dept,expression:"dept"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.dept},on:{input:function(t){t.target.composing||(e.dept=t.target.value)}}})]),e._v(" "),i("hr"),e._v(" "),i("div",[i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Submit")]),e._v(" "),i("router-link",{staticClass:"btn btn-outline-danger",attrs:{to:"/"}},[e._v("Cancel")])],1)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h4",[this._v("Edit Player")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Player ID")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Name")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Role")])])}]},_=i("VU/8")(w,y,!1,null,null,null).exports,b={name:"edit-employee",data:()=>({employee_id:null,name:null,dept:null,position:null}),beforeRouteEnter(e,t,i){p.collection("employees").where("employee_id","==",e.params.employee_id).get().then(e=>{e.forEach(e=>{i(t=>{t.employee_id=e.data().employee_id,t.name=e.data().name,t.dept=e.data().dept})})})},watch:{$route:"fetchData"},methods:{fetchData(){p.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(e=>{e.forEach(e=>{this.employee_id=e.data().employee_id,this.name=e.data().name,this.dept=e.data().dept})})},updateEmployee(){confirm("Sure?")&&p.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(e=>{e.forEach(e=>{e.ref.update({employee_id:this.employee_id,name:this.name,dept:this.dept}).then(()=>{this.$router.push({name:"view-employee",params:{employee_id:this.employee_id}})})})})}}},x={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container pt-5",attrs:{id:"edit-employee"}},[i("div",{staticClass:"card"},[e._m(0),e._v(" "),i("div",{staticClass:"card-body"},[i("form",{staticClass:"col s12",on:{submit:function(t){return t.preventDefault(),e.updateEmployee(t)}}},[i("div",{staticClass:"input-group mb-3"},[e._m(1),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.employee_id,expression:"employee_id"}],staticClass:"form-control",attrs:{type:"text",disabled:"",required:""},domProps:{value:e.employee_id},on:{input:function(t){t.target.composing||(e.employee_id=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"input-group mb-3"},[e._m(2),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"input-group mb-3"},[e._m(3),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.dept,expression:"dept"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.dept},on:{input:function(t){t.target.composing||(e.dept=t.target.value)}}})]),e._v(" "),i("hr"),e._v(" "),i("div",[i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Submit")]),e._v(" "),i("router-link",{staticClass:"btn btn-outline-danger",attrs:{to:"/"}},[e._v("Cancel")])],1)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h4",[this._v("Edit Game")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Game ID")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Name")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Owner")])])}]},C=i("VU/8")(b,x,!1,null,null,null).exports,D={name:"view-employee",data:()=>({employee_id:null,name:null,dept:null}),beforeRouteEnter(e,t,i){p.collection("employees").where("employee_id","==",e.params.employee_id).get().then(e=>{e.forEach(e=>{i(t=>{t.employee_id=e.data().employee_id,t.name=e.data().name,t.dept=e.data().dept})})})},watch:{$route:"fetchData"},methods:{fetchData(){p.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(e=>{e.forEach(e=>{this.employee_id=e.data().employee_id,this.name=e.data().name,this.dept=e.data().dept})})},deleteEmployee(){confirm("Sure?")&&p.collection("employees").where("employee_id","==",this.$route.params.employee_id).get().then(e=>{e.forEach(e=>{e.ref.delete(),this.$router.push("/")})})},doNothing(){console.log("to be implemented")},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},tempAnchorList:function(){var e=[];return anchorsRef.once("value",function(t){t.forEach(function(t){var i={Key:t.key,Data:t.val()};e.push(i)})}),e}}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container pt-5",attrs:{id:"view-employee"}},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("h4",[e._v(e._s(e.name))])]),e._v(" "),i("ul",{staticClass:"list-group list-group-flush"},[i("li",{staticClass:"list-group-item"},[e._v("Game ID : "+e._s(e.employee_id))]),e._v(" "),i("li",{staticClass:"list-group-item"},[e._v("Owner : "+e._s(e.dept))]),e._v(" "),i("router-link",{staticClass:"list-group-item btn btn-outline-primary",attrs:{to:"/rtplay"}},[e._v("Playboard")]),e._v(" "),i("router-link",{staticClass:"list-group-item btn btn-outline-warning",attrs:{to:"/rtthreed"}},[e._v("3D (under construction)")])],1)]),e._v(" "),i("hr"),e._v(" "),i("div",{staticClass:"card"},[i("ul",{staticClass:"list-group list-group-flush"},[i("router-link",{staticClass:"list-group-item btn btn-outline-dark",attrs:{to:"/"}},[e._v("Back")]),e._v(" "),i("router-link",{staticClass:"list-group-item btn btn-outline-primary",attrs:{to:{name:"edit-employee",params:{employee_id:e.employee_id}}}},[e._v("Edit Information")]),e._v(" "),i("button",{staticClass:"list-group-item btn btn-outline-danger",on:{click:e.doNothing}},[e._v("Delete (to be implemented)")])],1),e._v(" "),i("div",{staticClass:"fixed-action-btn"},[i("router-link",{staticClass:"btn-floating btn-larg red",attrs:{to:{name:"edit-employee",params:{employee_id:e.employee_id}}}},[i("i",{staticClass:"fa fa-pencil"})])],1)])])},staticRenderFns:[]},k=i("VU/8")(D,A,!1,null,null,null).exports,E={name:"login",data:function(){return{email:"",password:""}},methods:{login:function(e){r.a.auth().signInWithEmailAndPassword(this.email,this.password).then(e=>{window.location.reload(!0),this.$router.push("/")},e=>{alert(e.message)}),e.preventDefault()},register:function(e){r.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(e=>{alert("Account Created"),window.location.reload(!0),this.$router.push("/")},e=>{alert(e.message)}),e.preventDefault()}}},H={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container pt-5"},[i("div",{staticClass:"card"},[e._m(0),e._v(" "),i("div",{staticClass:"card-body"},[i("form",[i("div",{staticClass:"input-group mb-3"},[e._m(1),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"input-group mb-3"},[e._m(2),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),i("buttun",{staticClass:"btn btn-outline-primary",on:{click:e.login}},[e._v("Sign In")]),e._v(" "),i("buttun",{staticClass:"btn btn-outline-success",on:{click:e.register}},[e._v("Sign Up")])],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h3",[this._v("Login")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Email")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Password")])])}]},I=i("VU/8")(E,H,!1,null,null,null).exports,M={name:"register",data:function(){return{email:"",password:""}},methods:{register:function(e){r.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(e=>{alert("Account Created"),window.location.reload(!0),this.$router.push("/")},e=>{alert(e.message)}),e.preventDefault()}}},T={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pt-5"},[i("div",{staticClass:"card text-black bg-light mb-3"},[e._m(0),e._v(" "),i("div",{staticClass:"card-body"},[i("form",[i("div",{staticClass:"input-group mb-3"},[e._m(1),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"input-group mb-3"},[e._m(2),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),i("buttun",{staticClass:"btn btn-outline-success",on:{click:e.register}},[e._v("Register")])],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h3",[this._v("Register")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Email")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[this._v("Password")])])}]},S=i("VU/8")(M,T,!1,null,null,null).exports,R=(i("YrBu"),i("vwbq"),i("M4fF"),{name:"playboard",data:()=>({employees:[],nrad:7,space:1,color:"#aaa",maxID:0,ratio:32,nindex:0,curAnchor:-1,grid:[],anchors:[],window:{width:0,height:0}}),computed:{numi(){return this.window.width/this.ratio},numj(){return this.window.height/this.ratio}},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.setGrid(),this.getAnchorLocationFromServer(),this.calculateTheField(),window.addEventListener("keydown",e=>{"s"==e.key&&this.addAnchor(0),"x"==e.key&&this.addAnchor(1),"Backspace"!=e.key&&"d"!=e.key||this.deleteAnchor()})},destroyed(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},addAnchor:function(e){var t={id:this.maxID,x:0,y:0,v:e};this.anchors.push(t),this.curAnchor=this.maxID,this.maxID+=1,this.addAnchorToServer(t),this.calculateTheField()},deleteAnchor(){if(-1!=this.curAnchor){var e,t=[];for(e=0;e<this.anchors.length;e++){var i=this.anchors[e];this.curAnchor!=i.id?t.push(i):(this.deleteAnchorFromServer(i),console.log("anchor "+String(i.id)+" deleted"))}this.anchors=t,this.curAnchor=-1,this.calculateTheField()}},getAnchorLocationFromServer:function(){p.collection("anchors").get().then(e=>{e.forEach(e=>{var t=this.setHexColor(e.data().v);e.data().id>this.maxID&&(this.maxID=e.data().id+1);const i={id:e.data().id,x:e.data().x,y:e.data().y,v:e.data().v,c:t};this.anchors.push(i)})})},addAnchorToServer:function(e){p.collection("anchors").add(e)},updateAnchorLocationOnServer:function(e){p.collection("anchors").where("id","==",e.id).get().then(t=>{t.forEach(t=>{t.ref.update({x:e.x,y:e.y})})})},deleteAnchorFromServer:function(e){p.collection("anchors").where("id","==",e.id).get().then(e=>{e.forEach(e=>{e.ref.delete()})})},setHexColor:function(e){return i("YrBu")("hsl("+String(240+120*e)+", 100%, 50%)").toHexString()},handleClickPoint:function(e){var t,i;for(i=0;i<this.anchors.length;i++)this.anchors[i].id==this.curAnchor&&(t=this.anchors[i]);t.x=e.x,t.y=e.y,this.updateAnchorLocationOnServer(t),this.calculateTheField(),console.log("anchor "+String(t.id)+" moved")},handleClickAnchor:function(e){this.curAnchor=e.id,console.log("anchor "+String(e.id)+" selected")},setGrid(){var e,t,i=1;for(e=0;e<this.numi;e++)for(t=0;t<this.numj;t++){var n={id:i+=1,x:e,y:t,v:.5};this.grid.push(n)}},setAnchors(){var e;for(e=0;e<2;e++){var t={id:e,x:e,y:e,v:e};this.anchors.push(t)}},fit:function(e,t,i,n,a){return e>i&&(e=i),e<t&&(e=t),n+(a-n)*(e-t)/(i-t)},calculateTheField(){var e;for(e=0;e<this.grid.length;e++){var t,i=this.grid[e],n=0,a=0;for(t=0;t<this.anchors.length;t++){var r=this.anchors[t],s=Math.pow(r.x-i.x,2),o=Math.pow(r.y-i.y,2),l=Math.pow(s+o,.5);if(0==l){n=1e-6,a=r.v;break}var c=Math.pow(l,-3);a+=r.v*c,n+=(1-r.v)*c}var h=a/(a+n);i.v=this.fit(h,.25,.75,0,1),i.c=this.setHexColor(i.v)}for(t=0;t<this.anchors.length;t++){(r=this.anchors[t]).c=this.setHexColor(r.v)}}}}),L={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pt-5",attrs:{id:"playboard"}},[i("svg",{attrs:{id:"picture",viewBox:"-250 -250 500 500"}},[i("circle",{attrs:{cx:(-1.5-e.numi/2)*(e.nrad+e.space)*2,cy:(.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:"blue",stroke:"#999"},on:{click:function(t){return e.addAnchor(0)}}}),e._v(" "),i("circle",{attrs:{cx:(-1.5-e.numi/2)*(e.nrad+e.space)*2,cy:(2.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:"red",stroke:"#999"},on:{click:function(t){return e.addAnchor(1)}}}),e._v(" "),i("circle",{attrs:{cx:(-1.5-e.numi/2)*(e.nrad+e.space)*2,cy:(4.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:"#333",stroke:"#999"},on:{click:function(t){return e.deleteAnchor()}}}),e._v(" "),e._l(e.grid,function(t){return[i("circle",{key:t.id,attrs:{cx:(t.x-e.numi/2)*(e.nrad+e.space)*2,cy:(t.y-e.numj/2)*(e.nrad+e.space)*2,r:e.nrad,fill:"#ddd",stroke:t.c,"stroke-width":"1.4"},on:{click:function(i){return e.handleClickPoint(t)}}})]}),e._v(" "),e._l(e.anchors,function(t){return[i("circle",{key:-t.id,attrs:{cx:(t.x-e.numi/2)*(e.nrad+e.space)*2,cy:(t.y-e.numj/2)*(e.nrad+e.space)*2,r:e.nrad-2,fill:t.c},on:{click:function(i){return e.handleClickAnchor(t)}}})]})],2)])},staticRenderFns:[]};var P=i("VU/8")(R,L,!1,function(e){i("DuPI")},null,null).exports;let $=m.ref("anchors");var G={name:"rtplayboard",firebase:{anchors:$},data:()=>({employees:[],nrad:13,space:1.6,color:"#aaa",ratio:34,nindex:0,curAnchor:-1,calcCount:0,intervalid1:"",grid:[],anchorManual:[],window:{width:0,height:0},startTime:0,firstRound:0,currentUser:!1,userTeam:-1,userColor:"none"}),computed:{numi(){return(this.window.width-50)/this.ratio},numj(){return(this.window.height-50)/this.ratio}},created(){r.a.auth().currentUser&&(this.currentUser=r.a.auth().currentUser.email,"shervinazadi93@gmail.com"==this.currentUser?(this.userTeam=1,this.userColor="red"):(this.userTeam=0,this.userColor="blue")),window.addEventListener("resize",this.handleResize),this.handleResize(),window.addEventListener("keydown",e=>{"s"==e.key&&this.addAnchor(0),"x"==e.key&&this.addAnchor(1),"Backspace"!=e.key&&"d"!=e.key||this.deleteAnchor()})},destroyed(){window.removeEventListener("resize",this.handleResize)},beforeDestroy(){clearInterval(this.intervalid1)},mounted:function(){this.startTime=Date.now(),this.setGrid(),this.anchorManualUpdate(),this.calculateTheField(),this.recalc()},methods:{anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},recalc:function(){this.intervalid1=setInterval(()=>{var e=this.anchorManual;this.anchorManualUpdate();var t=this.anchorManual;(this.arraysEqual(e,t)||this.calculateTheField(),0==this.firstRound)&&(Date.now()-this.startTime>1e3&&(this.calculateTheField(),this.firstRound=1))},1e3/30)},arraysEqual:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;++i){if(e[i].Data.id!==t[i].Data.id)return!1;if(e[i].Data.x!==t[i].Data.x)return!1;if(e[i].Data.y!==t[i].Data.y)return!1;if(e[i].Data.v!==t[i].Data.v)return!1}return!0},maxID(){var e,t=1,i=this.anchorManual;for(e=0;e<i.length;e++){var n=i[e].Data;t<=n.id&&(t=n.id+1)}return t},tempAnchorList:function(){var e=[];return $.once("value",function(t){t.forEach(function(t){var i={Key:t.key,Data:t.val()};e.push(i)})}),e},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},addAnchor:function(e){var t={id:this.maxID(),x:0,y:0,v:e};$.push(t),this.curAnchor=t.id,console.log("anchor "+this.curAnchor+" added")},deleteAnchor(){var e=0;if(-1!=this.curAnchor){for(var t=this.anchorManual,i=0;i<t.length;i++){var n=t[i].Data,a=t[i].Key;this.curAnchor==n.id&&($.child(a).remove(),e=1)}console.log("anchor "+this.curAnchor+" added"),this.curAnchor=-1}else console.log("anchor "+String(this.curAnchor)+" does not exist anymore");0==e&&console.log("anchor "+String(this.curAnchor)+" does not exist anymore")},setHexColor:function(e){return i("YrBu")("hsl("+String(240+120*e)+", 100%, 50%)").toHexString()},setHexColorPlusUpdates:function(e){var t=i("YrBu"),n="hsl("+String(240+120*e)+", 100%, 50%)";return this.calculateTheField(),t(n).toHexString()},handleClickPoint:function(e){for(var t=0,i=this.anchorManual,n=0;n<i.length;n++){var a=i[n].Data,r=i[n].Key;if(this.curAnchor==i[n].Data.id){a=i[n].Data,r=i[n].Key,t=1;break}}1==t?(a.x=e.x,a.y=e.y,$.child(r).set(a),console.log("anchor "+String(a.id)+" moved"),this.calculateTheField()):(console.log("anchor "+String(this.curAnchor)+" does not exist anymore"),this.curAnchor=-1)},handleClickAnchor:function(e){e.v==this.userTeam?(this.curAnchor=e.id,console.log("anchor "+String(e.id)+" selected")):(this.curAnchor=-1,console.log("that is not your anchor"))},setGrid(){var e,t,i=1;for(e=0;e<this.numi;e++)for(t=0;t<this.numj;t++){var n={id:i+=1,x:e,y:t,v:.5};this.grid.push(n)}},fit:function(e,t,i,n,a){return e>i&&(e=i),e<t&&(e=t),n+(a-n)*(e-t)/(i-t)},calculateTheField:function(){var e,t=this.anchorManual;for(e=0;e<this.grid.length;e++){var i,n=this.grid[e],a=0,r=0;for(i=0;i<t.length;i++){var s=t[i].Data,o=Math.pow(s.x-n.x,2),l=Math.pow(s.y-n.y,2),c=Math.pow(o+l,.5);if(0==c){a=1e-6,r=s.v;break}var h=Math.pow(c,-3);r+=s.v*h,a+=(1-s.v)*h}var d=r/(r+a);n.v=this.fit(d,0,1,0,1)}this.calcCount+=1},WIDTH:function(){return window.innerWidth},HEIGHT:function(){return window.innerHeight-62},viewBox:function(){return String(-this.WIDTH()/2)+" "+String(-this.HEIGHT()/2)+" "+String(this.WIDTH())+" "+String(this.HEIGHT())}}},z={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"rtplayboard"}},[i("svg",{attrs:{width:e.WIDTH(),height:e.HEIGHT(),viewBox:e.viewBox()}},[i("circle",{attrs:{cx:(-1.5-(e.numi-2)/2)*(e.nrad+e.space)*2,cy:(.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:e.userColor,stroke:"#999"},on:{click:function(t){return e.addAnchor(e.userTeam)}}}),e._v(" "),i("circle",{attrs:{cx:(-1.5-(e.numi-2)/2)*(e.nrad+e.space)*2,cy:(2.5-e.numj/2)*(e.nrad+e.space)*2,r:2*e.nrad,fill:"#333",stroke:"#999"},on:{click:function(t){return e.deleteAnchor()}}}),e._v(" "),e._l(e.grid,function(t){return[i("circle",{key:t.id,attrs:{cx:(t.x-(e.numi-2)/2)*(e.nrad+e.space)*2,cy:(t.y-e.numj/2)*(e.nrad+e.space)*2,r:e.nrad,fill:"#ddd",stroke:e.setHexColor(t.v),"stroke-width":"2"},on:{click:function(i){return e.handleClickPoint(t)}}})]}),e._v(" "),e._l(e.anchorManual,function(t){return[i("circle",{key:-t.Data.id,attrs:{cx:(t.Data.x-(e.numi-2)/2)*(e.nrad+e.space)*2,cy:(t.Data.y-e.numj/2)*(e.nrad+e.space)*2,r:e.nrad-2,fill:e.setHexColor(t.Data.v)},on:{click:function(i){return e.handleClickAnchor(t.Data)}}})]})],2)])},staticRenderFns:[]};var B=i("VU/8")(G,z,!1,function(e){i("5Ts7")},null,null).exports,F=i("Ml+6");let U=m.ref("anchors");var W={name:"threed",data:()=>({tolerance:.1,intervalid1:"",anchorManual:[],camera:null,scene:null,renderer:null,meshes:[]}),mounted(){this.recalc(),this.init(),this.tempAnchorList(),this.setAnalysisGrid(this.tolerance),this.constructMeshes(),this.addMeshesToScene(),this.animate()},beforeDestroy(){clearInterval(this.intervalid1)},methods:{init:function(){let e=document.getElementById("threed");this.scene=new F.Scene,this.scene.background=new F.Color(16777215),this.camera=new F.PerspectiveCamera(40,this.WIDTH()/this.HEIGHT(),1,1e3),this.camera.position={x:4,y:4,z:10};let t=new F.Vector3(0,0,0);this.camera.lookAt(t),this.renderer=new F.WebGLRenderer,this.renderer.setSize(this.WIDTH(),this.HEIGHT()),e.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1)},constructMeshes:function(){this.makeBox(2,2,2),this.makeCube(2.005)},addMeshesToScene:function(){for(var e=0;e<this.meshes.length;e++)this.scene.add(this.meshes[e])},animate:function(){requestAnimationFrame(this.animate),this.meshes[0].rotation.y+=.005,this.meshes[1].rotation.y+=.005,this.renderer.render(this.scene,this.camera)},makeBox:function(e,t,i){let n=new F.BoxGeometry(e,t,i),a=new F.LineBasicMaterial({color:16777215,linewidth:1,linecap:"round",linejoin:"round",blending:F.AdditiveBlending,transparent:!0,opacity:.8}),r=new F.Mesh(n,a);this.meshes.push(r)},makePlane:function(e){let t=new F.PlaneGeometry(e,e),i=new F.MeshBasicMaterial({color:13421772,side:F.DoubleSide}),n=new F.Mesh(t,i);n.rotation.x=Math.PI/2,this.meshes.push(n)},makeCube:function(e){var t=this.cube(e),i=new F.LineSegments(t,new F.LineBasicMaterial({color:0,dashSize:.02,gapSize:.01}));i.computeLineDistances(),this.meshes.push(i)},cube:function(e){var t=.5*e,i=new F.BufferGeometry,n=[];return n.push(-t,-t,-t,-t,t,-t,-t,t,-t,t,t,-t,t,t,-t,t,-t,-t,t,-t,-t,-t,-t,-t,-t,-t,t,-t,t,t,-t,t,t,t,t,t,t,t,t,t,-t,t,t,-t,t,-t,-t,t,-t,-t,-t,-t,-t,t,-t,t,-t,-t,t,t,t,t,-t,t,t,t,t,-t,-t,t,-t,t),i.addAttribute("position",new F.Float32BufferAttribute(n,3)),i},WIDTH:function(){return 2*window.innerWidth},HEIGHT:function(){return 2*(window.innerHeight-62)},onWindowResize:function(){this.camera.aspect=this.WIDTH()/this.HEIGHT(),console.log(this.WIDTH(),this.HEIGHT()),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH(),this.HEIGHT())},tempAnchorList:function(){var e=[];return U.once("value",function(t){t.forEach(function(t){var i={Key:t.key,Data:t.val()};e.push(i)})}),e},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},recalc:function(){this.intervalid1=setInterval(()=>{this.anchorManualUpdate(),this.setAnalysisGrid(this.tol)},100)},setAnalysisGrid:function(e){var t=this.anchorManual;if(t.length>0){for(var i,n,a=t[0].Data.x,r=t[0].Data.y,s=0;s<t.length;s++)t[s].Data.x>a&&(a=t[s].Data.x),t[s].Data.x<i&&(i=t[s].Data.x),t[s].Data.y>r&&(r=t[s].Data.y),t[s].Data.y<n&&(n=t[s].Data.y);console.loh("i got here"),console.log(i,a,n,r)}}}},j={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"threed"}})},staticRenderFns:[]};var q=i("VU/8")(W,j,!1,function(e){i("uaeV")},"data-v-7a44f94c",null).exports,O=i("qKrd");const V=i.n(O)()(F);let N=m.ref("anchors");var K={name:"rtthreed",firebase:{anchors:N},data:()=>({employees:[],nrad:13,space:1.6,color:"#aaa",ratio:34,nindex:0,curAnchor:-1,calcCount:0,intervalid1:"",grid:[],anchorManual:[],window:{width:0,height:0},tolerance:.71,rotation:0,extrusionHeight:1,startTime:0,firstRound:0,camera:null,control:null,scene:null,renderer:null,meshes:[]}),computed:{numi(){return(this.window.width-50)/this.ratio},numj(){return(this.window.height-50)/this.ratio}},created(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed(){window.removeEventListener("resize",this.handleResize)},beforeDestroy(){clearInterval(this.intervalid1)},mounted:function(){this.startTime=Date.now(),console.log(V),this.init(),this.constructMeshes(),this.addMeshesToScene(),this.initialRender(),console.log("start"),this.recalc()},methods:{init:function(){let e=document.getElementById("rtthreed");this.scene=new F.Scene,this.scene.background=new F.Color(16777215);var t=new F.AmbientLight(16777215);this.scene.add(t),this.camera=new F.OrthographicCamera(this.WIDTH()/-80,this.WIDTH()/80,this.HEIGHT()/80,this.HEIGHT()/-80,.01,50),this.camera.position.set(16,20,16);let i=new F.Vector3(4,0,4);this.camera.lookAt(i),this.renderer=new F.WebGLRenderer,this.renderer.setSize(this.WIDTH(),this.HEIGHT()),this.renderer.setPixelRatio(window.devicePixelRatio),e.appendChild(this.renderer.domElement),this.controls=new V(this.camera),this.controls.enableZoom=!0,this.controls.enableRotate=!1,this.controls.autoRotate=!1,this.controls.autoRotateSpeed=.5,this.controls.panSpeed=.5,this.controls.rotateSpeed=.7,this.controls.enableDamping=!0,this.controls.dampingFactor=1,this.controls.minPolarAngle=4*-Math.PI/9,this.controls.maxPolarAngle=4*Math.PI/9,this.controls.update(),window.addEventListener("resize",this.onWindowResize,!1)},constructMeshes:function(){this.drawThresholds(this.tolerance),this.setField(this.tolerance)},addMeshesToScene:function(){for(var e=0;e<this.meshes.length;e++)this.scene.add(this.meshes[e])},initialRender:function(){this.renderer.render(this.scene,this.camera)},recalc:function(){this.intervalid1=setInterval(()=>{var e=this.anchorManual;this.anchorManualUpdate();var t=this.anchorManual;(this.arraysEqual(e,t)?console.log("no change"):(console.log("updating"),this.toUpdate()),0==this.firstRound)&&(Date.now()-this.startTime>1e3&&(this.toUpdate(),this.firstRound=1));this.controls.update(),this.renderer.render(this.scene,this.camera)},1e3/30)},toUpdate:function(){var e=this.scene.getObjectByName("toberefreshed");this.scene.remove(e);var t=this.scene.getObjectByName("toberefreshed1");this.scene.remove(t),this.drawThresholds(this.tolerance/12),this.scene.add(this.meshes[this.meshes.length-1]),this.setField(this.tolerance),this.scene.add(this.meshes[this.meshes.length-1])},arraysEqual:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;++i){if(e[i].Data.id!==t[i].Data.id)return!1;if(e[i].Data.x!==t[i].Data.x)return!1;if(e[i].Data.y!==t[i].Data.y)return!1;if(e[i].Data.v!==t[i].Data.v)return!1}return!0},WIDTH:function(){return window.innerWidth},HEIGHT:function(){return window.innerHeight-62},onWindowResize:function(){this.camera.aspect=this.WIDTH()/this.HEIGHT(),console.log(this.WIDTH(),this.HEIGHT()),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH(),this.HEIGHT())},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},fit:function(e,t,i,n,a){return e>i&&(e=i),e<t&&(e=t),n+(a-n)*(e-t)/(i-t)},drawThresholds:function(e){var t=this.anchorManual,i=0,n=0,a=0,r=0;if(t.length>0){i=t[0].Data.x,n=t[0].Data.x,a=t[0].Data.y,r=t[0].Data.y;for(var s=0;s<t.length;s++)t[s].Data.x>n&&(n=t[s].Data.x),t[s].Data.x<i&&(i=t[s].Data.x),t[s].Data.y>r&&(r=t[s].Data.y),t[s].Data.y<a&&(a=t[s].Data.y);i-=2,a-=2,n+=2,r+=2}var o=(n-i)/e,l=(r-a)/e,c=new F.BufferGeometry,h=[],d=1;for(s=0;s<o;s++)for(var u=0;u<l;u++){var p=s*e,m=u*e,v=this.evalIntensity(p,m,t),f=this.evalIntensity(p+e,m,t);if((v-.5)*(f-.5)<=0){var g=p+(v<f?this.fit(.5,v,f,0,1):this.fit(.5,f,v,1,0))*e,w=m;h.push(g+i,0,w+a),h.push(g+i,this.extrusionHeight,w+a),d++}var y=this.evalIntensity(p,m+e,t);if((v-.5)*(y-.5)<=0){w=m+(v<y?this.fit(.5,v,y,0,1):this.fit(.5,y,v,1,0))*e,g=p;h.push(g+i,0,w+a),h.push(g+i,this.extrusionHeight,w+a),d++}}var _=new Float32Array(3*d*2);for(s=0;s<3*d*2;s++)_[s]=h[s];c.addAttribute("position",new F.BufferAttribute(_,3));var b=new F.LineSegments(c,new F.LineBasicMaterial({color:0}));b.name="toberefreshed",this.meshes.push(b)},evalIntensity:function(e,t,i){var n,a=0,r=0;for(n=0;n<i.length;n++){var s=i[n].Data,o=Math.pow(s.x-e,2),l=Math.pow(s.y-t,2),c=Math.pow(o+l,.5);if(0==c){a=1e-6,r=s.v;break}var h=Math.pow(c,-3);r+=s.v*h,a+=(1-s.v)*h}var d=r/(r+a);return this.fit(d,0,1,0,1)},setField:function(e){var t=this.anchorManual,i=0,n=0,a=0,r=0;if(t.length>0){i=t[0].Data.x,n=t[0].Data.x,a=t[0].Data.y,r=t[0].Data.y;for(var s=0;s<t.length;s++)t[s].Data.x>n&&(n=t[s].Data.x),t[s].Data.x<i&&(i=t[s].Data.x),t[s].Data.y>r&&(r=t[s].Data.y),t[s].Data.y<a&&(a=t[s].Data.y);i-=2,a-=2,n+=2,r+=2}var o=Math.ceil((n-i)/e),l=Math.ceil((r-a)/e),c=new F.BufferGeometry,h=(new F.Color(1,0,0),o*l),d=new Float32Array(3*h),u=new Float32Array(3*h),p=[],m=0;for(s=0;s<o;s++)for(var v=0;v<l;v++){var f,g=s*e,w=v*e,y=0,_=0;for(f=0;f<t.length;f++){var b=t[f].Data,x=Math.pow(b.x-g,2),C=Math.pow(b.y-w,2),D=Math.pow(x+C,.5);if(0==D){y=1e-6,_=b.v;break}var A=Math.pow(D,-3);_+=b.v*A,y+=(1-b.v)*A}var k=_/(_+y),E=this.fit(k,0,1,0,1);d[3*m]=g+i,d[3*m+1]=0,d[3*m+2]=w+a;u[3*m]=E,u[3*m+1]=0,u[3*m+2]=1-E,m++}for(s=0;s<o-1;s++)for(v=0;v<l-1;v++){b=s*l+(v+1);var H=s*l+v,I=(s+1)*l+v,M=(s+1)*l+(v+1);p.push(b,H,M),p.push(H,I,M),console.log(o,l)}console.log(m),c.setIndex(p),c.addAttribute("position",new F.BufferAttribute(d,3)),c.addAttribute("color",new F.BufferAttribute(u,3));new F.PointsMaterial({size:.06,vertexColors:F.VertexColors}),new F.MeshBasicMaterial({color:16711680});var T=new F.MeshPhongMaterial({specular:1118481,shininess:250,side:F.DoubleSide,vertexColors:F.VertexColors}),S=new F.Mesh(c,T);S.name="toberefreshed1",S.material.transparent=!0,S.material.opacity=.6,this.meshes.push(S)},tempAnchorList:function(){var e=[];return N.once("value",function(t){t.forEach(function(t){var i={Key:t.key,Data:t.val()};e.push(i)})}),e},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},viewBox:function(){return String(-this.WIDTH()/2)+" "+String(-this.HEIGHT()/2)+" "+String(this.WIDTH())+" "+String(this.HEIGHT())}}},X={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"rtthreed"}})},staticRenderFns:[]};var Y=i("VU/8")(K,X,!1,function(e){i("XsXk")},"data-v-66762bc6",null).exports;let J=m.ref("anchors");var Z={name:"field",firebase:{anchors:J},data:()=>({employees:[],nrad:13,space:1.6,color:"#aaa",ratio:34,nindex:0,curAnchor:-1,calcCount:0,intervalid1:"",grid:[],anchorManual:[],window:{width:0,height:0},tolerance:.15,rotation:0,camera:null,scene:null,renderer:null,meshes:[]}),computed:{numi(){return(this.window.width-50)/this.ratio},numj(){return(this.window.height-50)/this.ratio}},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.anchorManualUpdate()},destroyed(){window.removeEventListener("resize",this.handleResize)},beforeDestroy(){clearInterval(this.intervalid1)},mounted:function(){this.init(),this.constructMeshes(),this.addMeshesToScene(),this.recalc()},methods:{init:function(){let e=document.getElementById("field");this.scene=new F.Scene,this.scene.background=new F.Color(16777215),this.camera=new F.PerspectiveCamera(40,this.WIDTH()/this.HEIGHT(),1,1e3),this.camera.position={x:20,y:20,z:20};let t=new F.Vector3(0,0,0);this.camera.lookAt(t),this.renderer=new F.WebGLRenderer,this.renderer.setSize(this.WIDTH(),this.HEIGHT()),this.renderer.setPixelRatio(window.devicePixelRatio),e.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1)},constructMeshes:function(){this.setField(this.tolerance)},addMeshesToScene:function(){for(var e=0;e<this.meshes.length;e++)this.scene.add(this.meshes[e])},animate:function(){setTimeout(function(){console.log("imwaiting")},5e3),requestAnimationFrame(this.animate),this.meshes[0].rotation.y+=.005,this.meshes[1].rotation.y+=.005,this.renderer.render(this.scene,this.camera)},recalc:function(){this.intervalid1=setInterval(()=>{this.anchorManualUpdate();var e=this.scene.getObjectByName("toberefreshed");this.scene.remove(e),this.setField(this.tolerance),this.scene.add(this.meshes[this.meshes.length-1]),this.renderer.render(this.scene,this.camera)},100)},makeBox:function(e,t,i){let n=new F.BoxGeometry(e,t,i),a=new F.LineBasicMaterial({color:16777215,linewidth:1,linecap:"round",linejoin:"round",blending:F.AdditiveBlending,transparent:!0,opacity:.8}),r=new F.Mesh(n,a);this.meshes.push(r)},makePlane:function(e){let t=new F.PlaneGeometry(e,e),i=new F.MeshBasicMaterial({color:13421772,side:F.DoubleSide}),n=new F.Mesh(t,i);n.rotation.x=Math.PI/2,this.meshes.push(n)},makeCube:function(e){var t=this.cube(e),i=new F.LineSegments(t,new F.LineBasicMaterial({color:0,dashSize:.02,gapSize:.01}));i.computeLineDistances(),this.meshes.push(i)},cube:function(e){var t=.5*e,i=new F.BufferGeometry,n=[];return n.push(-t,-t,-t,-t,t,-t,-t,t,-t,t,t,-t,t,t,-t,t,-t,-t,t,-t,-t,-t,-t,-t,-t,-t,t,-t,t,t,-t,t,t,t,t,t,t,t,t,t,-t,t,t,-t,t,-t,-t,t,-t,-t,-t,-t,-t,t,-t,t,-t,-t,t,t,t,t,-t,t,t,t,t,-t,-t,t,-t,t),i.addAttribute("position",new F.Float32BufferAttribute(n,3)),i},WIDTH:function(){return window.innerWidth},HEIGHT:function(){return window.innerHeight-62},onWindowResize:function(){this.camera.aspect=this.WIDTH()/this.HEIGHT(),console.log(this.WIDTH(),this.HEIGHT()),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH(),this.HEIGHT())},anchorManualUpdate:function(){this.anchorManual=this.tempAnchorList()},fit:function(e,t,i,n,a){return e>i&&(e=i),e<t&&(e=t),n+(a-n)*(e-t)/(i-t)},setField:function(e){var t=this.anchorManual,i=0,n=0,a=0,r=0;if(t.length>0){i=t[0].Data.x,n=t[0].Data.x,a=t[0].Data.y,r=t[0].Data.y;for(var s=0;s<t.length;s++)t[s].Data.x>n&&(n=t[s].Data.x),t[s].Data.x<i&&(i=t[s].Data.x),t[s].Data.y>r&&(r=t[s].Data.y),t[s].Data.y<a&&(a=t[s].Data.y);i-=2,a-=2,n+=2,r+=2}var o=(n-i)/e,l=(r-a)/e,c=new F.BufferGeometry,h=(new F.Color(1,0,0),o*l),d=new Float32Array(3*h),u=new Float32Array(3*h),p=0;for(s=0;s<o;s++)for(var m=0;m<l;m++){var v,f=s*e,g=m*e,w=0,y=0;for(v=0;v<t.length;v++){var _=t[v].Data,b=Math.pow(_.x-f,2),x=Math.pow(_.y-g,2),C=Math.pow(b+x,.5);if(0==C){w=1e-6,y=_.v;break}var D=Math.pow(C,-3);y+=_.v*D,w+=(1-_.v)*D}var A=y/(y+w),k=this.fit(A,0,1,0,1);d[3*p]=f-.5*o*e,d[3*p+1]=k,d[3*p+2]=g-.5*l*e;u[3*p]=k,u[3*p+1]=0,u[3*p+2]=1-k,p++}c.addAttribute("position",new F.BufferAttribute(d,3)),c.addAttribute("color",new F.BufferAttribute(u,3));var E=new F.PointsMaterial({size:.1,vertexColors:F.VertexColors}),H=new F.Points(c,E);H.name="toberefreshed",this.meshes.push(H),console.log("grid updated")},tempAnchorList:function(){var e=[];return J.once("value",function(t){t.forEach(function(t){var i={Key:t.key,Data:t.val()};e.push(i)})}),e},handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},viewBox:function(){let e=String(-this.WIDTH()/2)+" "+String(-this.HEIGHT()/2)+" "+String(this.WIDTH())+" "+String(this.HEIGHT());return console.log(e),e}}},Q={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"field"}})},staticRenderFns:[]};var ee=i("VU/8")(Z,Q,!1,function(e){i("AMBn")},"data-v-03e130ec",null).exports;n.a.use(d.a);let te=new d.a({routes:[{path:"/",name:"dashboard",component:g,meta:{requiresAuth:!0}},{path:"/threed",name:"threed",component:q,meta:{requiresAuth:!0}},{path:"/field",name:"field",component:ee,meta:{requiresAuth:!0}},{path:"/rtthreed",name:"rtthreed",component:Y,meta:{requiresAuth:!0}},{path:"/play",name:"playboard",component:P,meta:{requiresAuth:!0}},{path:"/rtplay",name:"rtplayboard",component:B,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:I,meta:{requiresGuest:!0}},{path:"/register",name:"register",component:S,meta:{requiresGuest:!0}},{path:"/new",name:"new-employee",component:_,meta:{requiresAuth:!0}},{path:"/edit/:employee_id",name:"edit-employee",component:C,meta:{requiresAuth:!0}},{path:"/:employee_id",name:"view-employee",component:k,meta:{requiresAuth:!0}}]});te.beforeEach((e,t,i)=>{e.matched.some(e=>e.meta.requiresAuth)?r.a.auth().currentUser?i():i({path:"/login",querry:{redirect:e.fullPath}}):e.matched.some(e=>e.meta.requiresGuest)&&r.a.auth().currentUser?(i(),i({path:"/",querry:{redirect:e.fullPath}})):i()});var ie=te;n.a.config.productionTip=!1;var ne=i("KpPp");let ae;n.a.use(ne),r.a.auth().onAuthStateChanged(e=>{ae||(ae=new n.a({el:"#app",router:ie,components:{App:h},template:"<App/>"}))})},XsXk:function(e,t){},uaeV:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b0995ff3b10294527350.js.map